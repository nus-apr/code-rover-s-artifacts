diff --git a/src/lib/ndpi_main.c b/src/lib/ndpi_main.c
index dcb34f2..d90505f 100644
--- a/src/lib/ndpi_main.c
+++ b/src/lib/ndpi_main.c
@@ -4127,9 +4127,7 @@ int ndpi_load_ip_category(struct ndpi_detection_module_struct *ndpi_str, const c
   int bits = 32;
   char *ptr;
   char ipbuf[64];
-
-  strncpy(ipbuf, ip_address_and_mask, sizeof(ipbuf));
-  ipbuf[sizeof(ipbuf) - 1] = '\0';
+ ndpi_info_mod ) { ndpi_setup_prefs 
 
   ptr = strrchr(ipbuf, '/');
 
