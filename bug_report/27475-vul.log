INFO: Seed: 2271217899
INFO: Loaded 1 modules   (200676 inline 8-bit counters): 200676 [0x166c6c8, 0x169d6ac), 
INFO: Loaded 1 PC tables (200676 PCs): 200676 [0x169d6b0,0x19ad4f0), 
/out/arrow-ipc-stream-fuzz: Running 1 inputs 1 time(s) each.
Running: /tmp/poc
=================================================================
==13==ERROR: AddressSanitizer: global-buffer-overflow on address 0x000002308938 at pc 0x000000d379fe bp 0x7ffc5e000ff0 sp 0x7ffc5e000fe8
READ of size 4 at 0x000002308938 thread T0
SCARINESS: 17 (4-byte-read-global-buffer-overflow)
    #0 0xd379fd in ValidateOffsets<arrow::ListType> /src/arrow/cpp/src/arrow/array/validate.cc:610:35
    #1 0xd379fd in arrow::Status arrow::internal::(anonymous namespace)::ValidateArrayFullImpl::ValidateListLike<arrow::ListType>(arrow::ListType const&) /src/arrow/cpp/src/arrow/array/validate.cc:589:12
    #2 0xd29c6c in Visit /src/arrow/cpp/src/arrow/array/validate.cc:478:47
    #3 0xd29c6c in VisitTypeInline<arrow::internal::(anonymous namespace)::ValidateArrayFullImpl> /src/arrow/cpp/src/arrow/visitor_inline.h:89:5
    #4 0xd29c6c in arrow::internal::(anonymous namespace)::ValidateArrayFullImpl::ValidateWithType(arrow::DataType const&) /src/arrow/cpp/src/arrow/array/validate.cc:458:58
    #5 0xd13006 in Validate /src/arrow/cpp/src/arrow/array/validate.cc:456:30
    #6 0xd13006 in arrow::internal::ValidateArrayFull(arrow::ArrayData const&) /src/arrow/cpp/src/arrow/array/validate.cc:634:38
    #7 0xacb6b8 in arrow::ipc::DictionaryMemo::Impl::ReifyDictionary(long, arrow::MemoryPool*) /src/arrow/cpp/src/arrow/ipc/dictionary.cc:199:9
    #8 0xacad63 in arrow::ipc::DictionaryMemo::GetDictionary(long, arrow::MemoryPool*) const /src/arrow/cpp/src/arrow/ipc/dictionary.cc:229:17
    #9 0xadf3ba in arrow::ipc::(anonymous namespace)::DictionaryResolver::VisitField(arrow::ipc::internal::FieldPosition, arrow::ArrayData*) /src/arrow/cpp/src/arrow/ipc/dictionary.cc:359:7
    #10 0xad3aaf in VisitChildren /src/arrow/cpp/src/arrow/ipc/dictionary.cc:344:9
    #11 0xad3aaf in arrow::ipc::ResolveDictionaries(std::__1::vector<std::__1::shared_ptr<arrow::ArrayData>, std::__1::allocator<std::__1::shared_ptr<arrow::ArrayData> > > const&, arrow::ipc::DictionaryMemo const&, arrow::MemoryPool*) /src/arrow/cpp/src/arrow/ipc/dictionary.cc:394:19
    #12 0x658135 in arrow::ipc::LoadRecordBatchSubset(org::apache::arrow::flatbuf::RecordBatch const*, std::__1::shared_ptr<arrow::Schema> const&, std::__1::vector<bool, std::__1::allocator<bool> > const*, arrow::ipc::DictionaryMemo const*, arrow::ipc::IpcReadOptions const&, arrow::ipc::MetadataVersion, arrow::Compression::type, arrow::io::RandomAccessFile*) /src/arrow/cpp/src/arrow/ipc/reader.cc:474:3
    #13 0x65c9f3 in arrow::ipc::LoadRecordBatch(org::apache::arrow::flatbuf::RecordBatch const*, std::__1::shared_ptr<arrow::Schema> const&, std::__1::vector<bool, std::__1::allocator<bool> > const&, arrow::ipc::DictionaryMemo const*, arrow::ipc::IpcReadOptions const&, arrow::ipc::MetadataVersion, arrow::Compression::type, arrow::io::RandomAccessFile*) /src/arrow/cpp/src/arrow/ipc/reader.cc:500:12
    #14 0x665e76 in arrow::ipc::ReadRecordBatchInternal(arrow::Buffer const&, std::__1::shared_ptr<arrow::Schema> const&, std::__1::vector<bool, std::__1::allocator<bool> > const&, arrow::ipc::DictionaryMemo const*, arrow::ipc::IpcReadOptions const&, arrow::io::RandomAccessFile*) /src/arrow/cpp/src/arrow/ipc/reader.cc:596:10
    #15 0x70efae in arrow::ipc::RecordBatchStreamReaderImpl::ReadNext(std::__1::shared_ptr<arrow::RecordBatch>*) /src/arrow/cpp/src/arrow/ipc/reader.cc:789:12
    #16 0x6a8520 in arrow::ipc::internal::FuzzIpcStream(unsigned char const*, long) /src/arrow/cpp/src/arrow/ipc/reader.cc:1710:5
    #17 0x64fbec in LLVMFuzzerTestOneInput /src/arrow/cpp/src/arrow/ipc/stream_fuzz.cc:25:17
    #18 0x554841 in fuzzer::Fuzzer::ExecuteCallback(unsigned char const*, unsigned long) /src/llvm-project/compiler-rt/lib/fuzzer/FuzzerLoop.cpp:595:15
    #19 0x53f912 in fuzzer::RunOneTest(fuzzer::Fuzzer*, char const*, unsigned long) /src/llvm-project/compiler-rt/lib/fuzzer/FuzzerDriver.cpp:323:6
    #20 0x5459ce in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long)) /src/llvm-project/compiler-rt/lib/fuzzer/FuzzerDriver.cpp:852:9
    #21 0x56d9b2 in main /src/llvm-project/compiler-rt/lib/fuzzer/FuzzerMain.cpp:20:10
    #22 0x7de2a651e83f in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2083f)
    #23 0x51abe8 in _start (/out/arrow-ipc-stream-fuzz+0x51abe8)

DEDUP_TOKEN: ValidateOffsets<arrow::ListType>--arrow::Status arrow::internal::(anonymous namespace)::ValidateArrayFullImpl::ValidateListLike<arrow::ListType>(arrow::ListType const&)--Visit
0x000002308938 is located 40 bytes to the left of global variable 'guard variable for arrow::SparseTensor::dim_name(int) const::kEmpty' defined in '/src/arrow/cpp/src/arrow/sparse_tensor.cc' (0x2308960) of size 8
0x000002308938 is located 0 bytes to the right of global variable 'kEmpty' defined in '/src/arrow/cpp/src/arrow/sparse_tensor.cc:435:28' (0x2308920) of size 24
SUMMARY: AddressSanitizer: global-buffer-overflow /src/arrow/cpp/src/arrow/array/validate.cc:610:35 in ValidateOffsets<arrow::ListType>
Shadow bytes around the buggy address:
  0x0000804590d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x0000804590e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x0000804590f0: 00 00 00 00 00 00 00 00 01 f9 f9 f9 f9 f9 f9 f9
  0x000080459100: 00 00 f9 f9 f9 f9 f9 f9 00 f9 f9 f9 f9 f9 f9 f9
  0x000080459110: 00 00 f9 f9 f9 f9 f9 f9 00 f9 f9 f9 f9 f9 f9 f9
=>0x000080459120: 00 00 00 00 00 00 00[f9]f9 f9 f9 f9 00 f9 f9 f9
  0x000080459130: f9 f9 f9 f9 00 00 00 00 00 00 00 f9 f9 f9 f9 f9
  0x000080459140: 00 f9 f9 f9 f9 f9 f9 f9 01 f9 f9 f9 f9 f9 f9 f9
  0x000080459150: 00 00 f9 f9 f9 f9 f9 f9 00 f9 f9 f9 f9 f9 f9 f9
  0x000080459160: 00 00 f9 f9 f9 f9 f9 f9 00 f9 f9 f9 f9 f9 f9 f9
  0x000080459170: 00 00 f9 f9 f9 f9 f9 f9 00 f9 f9 f9 f9 f9 f9 f9
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07 
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
  Shadow gap:              cc
==13==ABORTING
